<?php

/**
 * @file
 * Tests for the AddThis-module.
 */

class AddThisTestCase extends DrupalWebTestCase {

  public function getInfo() {
    return array(
      'name' => 'Tests for the AddThis-module.',
      'description' => 'Tests for the AddThis-module.',
      'group' => 'AddThis',
    );
  }

  public function testFunctionality() {
    $this->addThisModuleShouldProvideHelp();

    $this->addThisModuleShouldDefineField();

    $this->addThisModuleDefinesBlock();
  }

  private function addThisModuleShouldProvideHelp() {
    $this->assertTrue($this->stringContains(module_invoke('addthis', 'help', 'admin/help#addthis', NULL), 'About'),
                      'AddThis-module should provide help.');
  }

  private function addThisModuleShouldDefineField() {
    $this->assertEqual(1, count(module_invoke('addthis', 'field_info')), t('AddThis-module should define a field.'));
  }

  private function addThisModuleDefinesBlock() {
    $this->assertEqual(1, count(module_invoke('addthis', 'block_info')), t('AddThis-module should define a block.'));
  }

  private function stringContains($string, $contains) {
    return strpos($string, $contains) !== FALSE;
  }
}